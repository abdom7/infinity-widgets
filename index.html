<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity Pomodoro</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #0a0a0f;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            position: relative;
        }

        /* Animated Starfield */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: var(--min-opacity); transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Cosmic Glow Background */
        .cosmic-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(212, 165, 116, 0.08) 0%, rgba(74, 158, 255, 0.05) 40%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }

        /* Title */
        .title {
            font-family: 'Cinzel', serif;
            font-size: 2.2rem;
            font-weight: 600;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            background: linear-gradient(135deg, #d4a574 0%, #f5d799 50%, #d4a574 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 40px rgba(212, 165, 116, 0.3);
            position: relative;
        }

        .subtitle {
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.85rem;
            font-weight: 300;
            letter-spacing: 0.5em;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            margin-bottom: 50px;
        }

        /* Timer Display */
        .timer-container {
            position: relative;
            width: 280px;
            height: 280px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
        }

        /* Atomic Rings */
        .atomic-ring {
            position: absolute;
            border: 1px solid rgba(212, 165, 116, 0.2);
            border-radius: 50%;
            animation: rotate var(--speed) linear infinite;
        }

        .atomic-ring:nth-child(1) {
            width: 100%;
            height: 100%;
            --speed: 20s;
        }

        .atomic-ring:nth-child(2) {
            width: 90%;
            height: 90%;
            --speed: 15s;
            animation-direction: reverse;
            border-color: rgba(74, 158, 255, 0.15);
        }

        .atomic-ring:nth-child(3) {
            width: 80%;
            height: 80%;
            --speed: 25s;
            border-color: rgba(212, 165, 116, 0.1);
        }

        .atomic-ring::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #d4a574 0%, transparent 70%);
            border-radius: 50%;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px #d4a574, 0 0 20px rgba(212, 165, 116, 0.5);
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Progress Ring */
        .progress-ring {
            position: absolute;
            width: 260px;
            height: 260px;
            transform: rotate(-90deg);
        }

        .progress-ring-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.05);
            stroke-width: 3;
        }

        .progress-ring-fill {
            fill: none;
            stroke: url(#progressGradient);
            stroke-width: 3;
            stroke-linecap: round;
            stroke-dasharray: 785.4;
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 0.5s ease;
            filter: drop-shadow(0 0 8px rgba(212, 165, 116, 0.5));
        }

        /* Timer Text */
        .timer-display {
            position: relative;
            z-index: 5;
            text-align: center;
        }

        .time {
            font-family: 'Rajdhani', sans-serif;
            font-size: 4.5rem;
            font-weight: 600;
            color: #fff;
            letter-spacing: 0.05em;
            text-shadow: 0 0 30px rgba(212, 165, 116, 0.3);
            line-height: 1;
        }

        .timer-label {
            font-size: 0.75rem;
            font-weight: 400;
            letter-spacing: 0.3em;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            margin-top: 5px;
        }

        /* Time Adjust Controls */
        .time-adjust {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 35px;
        }

        .adjust-btn {
            width: 44px;
            height: 44px;
            border: 1px solid rgba(212, 165, 116, 0.3);
            background: rgba(212, 165, 116, 0.05);
            border-radius: 50%;
            color: #d4a574;
            font-size: 1.5rem;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Rajdhani', sans-serif;
        }

        .adjust-btn:hover {
            background: rgba(212, 165, 116, 0.15);
            border-color: rgba(212, 165, 116, 0.6);
            box-shadow: 0 0 20px rgba(212, 165, 116, 0.2);
            transform: scale(1.05);
        }

        .adjust-btn:active {
            transform: scale(0.95);
        }

        .time-preset {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 400;
            letter-spacing: 0.1em;
        }

        .time-preset span {
            color: #d4a574;
            font-weight: 600;
        }

        /* Control Buttons */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 35px;
        }

        .control-btn {
            padding: 14px 35px;
            border: none;
            border-radius: 30px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .start-btn {
            background: linear-gradient(135deg, #d4a574 0%, #c4956a 100%);
            color: #0a0a0f;
            box-shadow: 0 4px 20px rgba(212, 165, 116, 0.3);
        }

        .start-btn:hover {
            box-shadow: 0 6px 30px rgba(212, 165, 116, 0.5);
            transform: translateY(-2px);
        }

        .start-btn.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
        }

        .reset-btn {
            background: transparent;
            color: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.4);
            color: #fff;
        }

        /* Sound Toggle */
        .sound-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .sound-label {
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
        }

        .sound-toggles {
            display: flex;
            gap: 12px;
        }

        .sound-btn {
            padding: 10px 20px;
            border: 1px solid rgba(74, 158, 255, 0.2);
            background: rgba(74, 158, 255, 0.05);
            border-radius: 20px;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sound-btn svg {
            width: 16px;
            height: 16px;
            opacity: 0.7;
        }

        .sound-btn:hover {
            border-color: rgba(74, 158, 255, 0.4);
            background: rgba(74, 158, 255, 0.1);
        }

        .sound-btn.active {
            border-color: rgba(74, 158, 255, 0.6);
            background: rgba(74, 158, 255, 0.15);
            color: #4a9eff;
            box-shadow: 0 0 20px rgba(74, 158, 255, 0.2);
        }

        .sound-btn.active svg {
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 400px) {
            .container {
                padding: 30px 20px;
            }
            .title {
                font-size: 1.6rem;
                letter-spacing: 0.25em;
            }
            .timer-container {
                width: 240px;
                height: 240px;
            }
            .progress-ring {
                width: 220px;
                height: 220px;
            }
            .time {
                font-size: 3.5rem;
            }
            .controls {
                flex-direction: column;
                width: 100%;
            }
            .control-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Starfield Background -->
    <div class="starfield" id="starfield"></div>
    
    <!-- Cosmic Glow -->
    <div class="cosmic-glow"></div>

    <!-- Main Container -->
    <div class="container">
        <h1 class="title">Infinity</h1>
        <p class="subtitle">Pomodoro</p>

        <!-- Timer -->
        <div class="timer-container">
            <div class="atomic-ring"></div>
            <div class="atomic-ring"></div>
            <div class="atomic-ring"></div>
            
            <svg class="progress-ring" viewBox="0 0 260 260">
                <defs>
                    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#d4a574"/>
                        <stop offset="50%" stop-color="#f5d799"/>
                        <stop offset="100%" stop-color="#4a9eff"/>
                    </linearGradient>
                </defs>
                <circle class="progress-ring-bg" cx="130" cy="130" r="125"/>
                <circle class="progress-ring-fill" id="progressRing" cx="130" cy="130" r="125"/>
            </svg>

            <div class="timer-display">
                <div class="time" id="timerDisplay">25:00</div>
                <div class="timer-label" id="timerLabel">Focus Time</div>
            </div>
        </div>

        <!-- Time Adjustment -->
        <div class="time-adjust">
            <button class="adjust-btn" id="decreaseBtn">−</button>
            <div class="time-preset"><span id="presetMinutes">25</span> minutes</div>
            <button class="adjust-btn" id="increaseBtn">+</button>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="control-btn start-btn" id="startBtn">Start</button>
            <button class="control-btn reset-btn" id="resetBtn">Reset</button>
        </div>

        <!-- Sound Section -->
        <div class="sound-section">
            <span class="sound-label">Ambient Sounds</span>
            <div class="sound-toggles">
                <button class="sound-btn" id="rainBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                    </svg>
                    Rain
                </button>
                <button class="sound-btn" id="windBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/>
                    </svg>
                    Wind
                </button>
            </div>
        </div>
    </div>

    <script>
        // ============ CONFIGURATION ============
        const CONFIG = {
            defaultMinutes: 25,
            minMinutes: 1,
            maxMinutes: 60,
            circumference: 2 * Math.PI * 125 // 785.4
        };

        // ============ STATE ============
        let state = {
            totalSeconds: CONFIG.defaultMinutes * 60,
            remainingSeconds: CONFIG.defaultMinutes * 60,
            isRunning: false,
            intervalId: null,
            presetMinutes: CONFIG.defaultMinutes
        };

        // ============ DOM ELEMENTS ============
        const elements = {
            timerDisplay: document.getElementById('timerDisplay'),
            timerLabel: document.getElementById('timerLabel'),
            progressRing: document.getElementById('progressRing'),
            startBtn: document.getElementById('startBtn'),
            resetBtn: document.getElementById('resetBtn'),
            increaseBtn: document.getElementById('increaseBtn'),
            decreaseBtn: document.getElementById('decreaseBtn'),
            presetMinutes: document.getElementById('presetMinutes'),
            rainBtn: document.getElementById('rainBtn'),
            windBtn: document.getElementById('windBtn'),
            starfield: document.getElementById('starfield')
        };

        // ============ STARFIELD GENERATOR ============
        function createStarfield() {
            const starCount = 100;
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2 + 1;
                star.style.cssText = `
                    width: ${size}px;
                    height: ${size}px;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    --duration: ${Math.random() * 3 + 2}s;
                    --min-opacity: ${Math.random() * 0.3 + 0.1};
                    animation-delay: ${Math.random() * 3}s;
                    box-shadow: 0 0 ${size * 2}px rgba(255,255,255,0.3);
                `;
                elements.starfield.appendChild(star);
            }
        }

        // ============ TIMER FUNCTIONS ============
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateDisplay() {
            elements.timerDisplay.textContent = formatTime(state.remainingSeconds);
            const progress = state.remainingSeconds / state.totalSeconds;
            const offset = CONFIG.circumference * (1 - progress);
            elements.progressRing.style.strokeDashoffset = offset;
        }

        function startTimer() {
            if (state.isRunning) {
                pauseTimer();
                return;
            }

            state.isRunning = true;
            elements.startBtn.textContent = 'Pause';
            elements.startBtn.classList.add('active');
            elements.timerLabel.textContent = 'Focusing...';

            state.intervalId = setInterval(() => {
                state.remainingSeconds--;
                updateDisplay();

                if (state.remainingSeconds <= 0) {
                    completeTimer();
                }
            }, 1000);
        }

        function pauseTimer() {
            state.isRunning = false;
            clearInterval(state.intervalId);
            elements.startBtn.textContent = 'Resume';
            elements.startBtn.classList.remove('active');
            elements.timerLabel.textContent = 'Paused';
        }

        function resetTimer() {
            state.isRunning = false;
            clearInterval(state.intervalId);
            state.remainingSeconds = state.totalSeconds;
            elements.startBtn.textContent = 'Start';
            elements.startBtn.classList.remove('active');
            elements.timerLabel.textContent = 'Focus Time';
            updateDisplay();
        }

        function completeTimer() {
            state.isRunning = false;
            clearInterval(state.intervalId);
            elements.startBtn.textContent = 'Start';
            elements.startBtn.classList.remove('active');
            elements.timerLabel.textContent = 'Complete! ∞';
            
            // Play completion sound
            playCompletionSound();
        }

        function adjustTime(delta) {
            if (state.isRunning) return;
            
            state.presetMinutes = Math.max(
                CONFIG.minMinutes,
                Math.min(CONFIG.maxMinutes, state.presetMinutes + delta)
            );
            
            state.totalSeconds = state.presetMinutes * 60;
            state.remainingSeconds = state.totalSeconds;
            elements.presetMinutes.textContent = state.presetMinutes;
            updateDisplay();
        }

        // ============ AUDIO SYSTEM ============
        const AudioSystem = {
            context: null,
            sounds: {
                rain: { active: false, nodes: [] },
                wind: { active: false, nodes: [] }
            },

            init() {
                if (!this.context) {
                    this.context = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (this.context.state === 'suspended') {
                    this.context.resume();
                }
            },

            createNoise() {
                const bufferSize = 2 * this.context.sampleRate;
                const buffer = this.context.createBuffer(1, bufferSize, this.context.sampleRate);
                const output = buffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = Math.random() * 2 - 1;
                }
                
                const source = this.context.createBufferSource();
                source.buffer = buffer;
                source.loop = true;
                return source;
            },

            startRain() {
                this.init();
                if (this.sounds.rain.active) return;

                const noise = this.createNoise();
                const gainNode = this.context.createGain();
                const filter = this.context.createBiquadFilter();

                filter.type = 'lowpass';
                filter.frequency.value = 1500;
                gainNode.gain.value = 0.15;

                noise.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.context.destination);
                noise.start();

                this.sounds.rain.nodes = [noise, gainNode, filter];
                this.sounds.rain.active = true;
            },

            stopRain() {
                if (!this.sounds.rain.active) return;
                this.sounds.rain.nodes[0].stop();
                this.sounds.rain.nodes = [];
                this.sounds.rain.active = false;
            },

            startWind() {
                this.init();
                if (this.sounds.wind.active) return;

                const noise = this.createNoise();
                const gainNode = this.context.createGain();
                const filter = this.context.createBiquadFilter();
                const lfo = this.context.createOscillator();
                const lfoGain = this.context.createGain();

                filter.type = 'bandpass';
                filter.frequency.value = 400;
                filter.Q.value = 0.5;

                lfo.frequency.value = 0.3;
                lfoGain.gain.value = 200;

                lfo.connect(lfoGain);
                lfoGain.connect(filter.frequency);

                gainNode.gain.value = 0.12;

                noise.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.context.destination);
                noise.start();
                lfo.start();

                this.sounds.wind.nodes = [noise, lfo, gainNode, filter, lfoGain];
                this.sounds.wind.active = true;
            },

            stopWind() {
                if (!this.sounds.wind.active) return;
                this.sounds.wind.nodes[0].stop();
                this.sounds.wind.nodes[1].stop();
                this.sounds.wind.nodes = [];
                this.sounds.wind.active = false;
            }
        };

        function playCompletionSound() {
            AudioSystem.init();
            const osc = AudioSystem.context.createOscillator();
            const gain = AudioSystem.context.createGain();
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(528, AudioSystem.context.currentTime);
            osc.frequency.exponentialRampToValueAtTime(880, AudioSystem.context.currentTime + 0.5);
            
            gain.gain.setValueAtTime(0.3, AudioSystem.context.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, AudioSystem.context.currentTime + 1);
            
            osc.connect(gain);
            gain.connect(AudioSystem.context.destination);
            osc.start();
            osc.stop(AudioSystem.context.currentTime + 1);
        }

        function toggleSound(type, btn) {
            if (type === 'rain') {
                if (AudioSystem.sounds.rain.active) {
                    AudioSystem.stopRain();
                    btn.classList.remove('active');
                } else {
                    AudioSystem.startRain();
                    btn.classList.add('active');
                }
            } else if (type === 'wind') {
                if (AudioSystem.sounds.wind.active) {
                    AudioSystem.stopWind();
                    btn.classList.remove('active');
                } else {
                    AudioSystem.startWind();
                    btn.classList.add('active');
                }
            }
        }

        // ============ EVENT LISTENERS ============
        elements.startBtn.addEventListener('click', startTimer);
        elements.resetBtn.addEventListener('click', resetTimer);
        elements.increaseBtn.addEventListener('click', () => adjustTime(5));
        elements.decreaseBtn.addEventListener('click', () => adjustTime(-5));
        elements.rainBtn.addEventListener('click', () => toggleSound('rain', elements.rainBtn));
        elements.windBtn.addEventListener('click', () => toggleSound('wind', elements.windBtn));

        // ============ INITIALIZATION ============
        createStarfield();
        updateDisplay();
    </script>
</body>
</html>
